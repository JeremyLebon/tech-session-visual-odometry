<launch>

  <!-- arguments -->
  <arg name="zed_namespace"		      	default="zed" />
  <arg name="svo_file"                default="" /> <!-- <arg name="svo_file" default="path/to/svo/file.svo"> -->
  <arg name="camera_model"           	default="0" /> <!-- 0=ZED, 1=ZEDM-->
  <arg name="serial_number"          	default="0" />
  <arg name="verbose"                	default="true" />
  <arg name="resolution"             	default="3" /> <!--0=RESOLUTION_HD2K, 1=RESOLUTION_HD1080, 2=RESOLUTION_HD720, 3=RESOLUTION_VGA -->
  <arg name="frame_rate"             	default="60" /> <!-- framerate 15fps@4K, 30fps@1080p, 60fps@720p, 100fps@VGA  -->
  <arg name="rgb_topic"               default="rgb/image_rect_color" />
  <arg name="depth_topic"             default="depth/depth_registered" />
  <arg name="camera_info_topic"       default="rgb/camera_info" />
  <arg name="depth_camera_info_topic" default="depth/camera_info" />
  <arg name="camera_frame"            default="zed_camera_center" />
  <arg name="vo"                      default="true" />

  <!-- launch zed camera driver -->
  <group ns="$(arg zed_namespace)">
    <include file="$(find zed_wrapper)/launch/zed_camera.launch">
      <arg name="svo_file"            	value="$(arg svo_file)" />
      <arg name="camera_model"        	value="$(arg camera_model)" />
      <arg name="serial_number"       	value="$(arg serial_number)" />
      <arg name="resolution"          	value="$(arg resolution)" />
      <arg name="frame_rate"          	value="$(arg frame_rate)" />
      <arg name="verbose"             	value="$(arg verbose)" />
      <arg name="rgb_topic"             value="$(arg rgb_topic)" />
      <arg name="depth_topic"           value="$(arg depth_topic)" />
      <arg name="rgb_info_topic"       	value="$(arg camera_info_topic)" />
      <arg name="depth_cam_info_topic" 	value="$(arg depth_camera_info_topic)" />
      <arg name="base_frame"            value="$(arg camera_frame)" />
      <arg name="publish_map_tf"        value="false" unless="$(arg vo)"/>
      <arg name="publish_tf"            value="false" if="$(arg vo)" />
    </include>
  </group>

  <include file="$(find rtabmap_ros)/launch/rtabmap.launch">
    <arg name="cfg"                       value="$(find visual_odometry)/config/rtabmap_zed.ini" />
    <arg name="rgb_topic"               	value="/$(arg zed_namespace)/$(arg rgb_topic)" />
    <arg name="depth_topic"             	value="/$(arg zed_namespace)/$(arg depth_topic)" />
    <arg name="camera_info_topic"       	value="/$(arg zed_namespace)/$(arg camera_info_topic)" />
    <arg name="depth_camera_info_topic" 	value="/$(arg zed_namespace)/$(arg depth_camera_info_topic)" />
    <arg name="frame_id"                  value="$(arg camera_frame)" />
    <arg name="approx_sync"               value="false" />
    <arg name="visual_odometry"           value="$(arg vo)" />
    <arg name="odom_topic"                value="/$(arg zed_namespace)/odom" unless="$(arg vo)"/>
    <arg name="rtabmap_args"              value="--delete_db_on_start" />
  </include>

</launch>
